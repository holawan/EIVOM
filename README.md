# EIVOM ì´ë´„

## ì˜í™”ì¸ì„ ìœ„í•œ ì¶”ì²œ ë° ì»¤ë®¤ë‹ˆí‹° ì›¹ì‚¬ì´íŠ¸

#### ğŸ¤SSAFY ìƒë°˜ê¸° ìµœì¢… í”„ë¡œì íŠ¸ ìš°ìˆ˜ìƒ



## EIVOM

MOVIEë¥¼ ë’¤ì§‘ì€ ë‹¨ì–´ì¸ EIVOM í•œêµ­ì–´ë¡œ ì´ë´„ìœ¼ë¡œ ë°œìŒë˜ë©°,

- ì¢‹ì•„í•˜ëŠ” ì˜í™”ì— ëŒ€í•´ ì´ì•¼ê¸° ë‚˜ëˆ„ë©° **ê¹Šì´ ë´„**
- í¬ë£¨ ê°€ì…ìœ¼ë¡œ ë‚˜ì™€ í†µí•˜ëŠ” ì‚¬ëŒê³¼ **ê°™ì´ ë´„**

- ë§ì¶¤ ì¶”ì²œìœ¼ë¡œ ì„ í˜¸í•˜ëŠ” ì¥ë¥´ì˜ ì˜í™”ë¥¼ **ì˜¤ë¡¯ì´ ë´„**

ì´ë¼ëŠ” ì˜ë¯¸ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.

## ê²°ê³¼ë¬¼ Preview

### íšŒì›ê°€ì…/ë¡œê·¸ì¸

![ezgif.com-gif-maker](README.assets/ezgif.com-gif-maker.gif)

### í”„ë¡œí•„

#### ìì‹ ì˜ í”„ë¡œí•„ê³¼ ì¢‹ì•„ìš” ëˆ„ë¥¸ ì˜í™” ì¡°íšŒ ê°€ëŠ¥

![í”„ë¡œí•„](README.assets/í”„ë¡œí•„.gif)

### ë©”ì¸í˜ì´ì§€(ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ êµ¬ì„±)

- ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ìƒì˜ ì˜í™”
- ì˜í™” êµ°ì§‘í™” í›„ ì¶”ì²œ 
- ë‚ ì”¨ ê¸°ë°˜ ì˜í™” ì¶”ì²œ 
- ìµœê·¼ ì¡°íšŒìˆ˜ê°€ ë†’ì€ ì˜í™”
- TMDB(TheMovieDataBase) ì¸ê¸° ì˜í™”
- ìœ ì €ì˜ ì„ í˜¸ ì¥ë¥´ ê¸°ë°˜ ì¶”ì²œ ì˜í™”  

![ë©”ì¸í˜ì´ì§€](README.assets/ë©”ì¸í˜ì´ì§€.gif)

### ì˜í™” ìƒì„¸ í˜ì´ì§€

- ì˜í™”ì˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ
- ì¶œì—° ë°°ìš° ì¡°íšŒ
  - ì¶œì—° ë°°ìš° í´ë¦­ì‹œ ë°°ìš°ì˜ í•„ëª¨ê·¸ë˜í”¼ë¡œ ì´ë™ 
- ì˜í™”ì— ëŒ€í•œ ë¦¬ë·° ì¡°íšŒ ë° ìƒì„±/ì‚­ì œ 

![ì˜í™”ë””í…Œì¼](README.assets/ì˜í™”ë””í…Œì¼.gif)

### ê²€ìƒ‰ê¸°ëŠ¥

- ì˜í™” ê²€ìƒ‰ ë° ê²€ìƒ‰ ê²°ê³¼ë¡œ ì´ë™

![search](README.assets/search.gif)

### í¬ë£¨ í˜ì´ì§€ (ê°œë°œ ì§„í–‰ì¤‘)

- í¬ë£¨ ê°€ì…, ê²Œì‹œê¸€ ì‘ì„± ë° ìˆ˜ì •/ì‚­ì œ, ëŒ“ê¸€ ì‘ì„± ë° ìˆ˜ì •/ì‚­ì œ 

 ![í¬ë£¨ì•„í‹°í´](README.assets/í¬ë£¨ì•„í‹°í´.gif)

### ê´€ë¦¬ì í˜ì´ì§€

- íšŒì› ì •ë³´ ê´€ë¦¬, ì˜í™”/ë¦¬ë·° ì •ë³´,í¬ë£¨ ì •ë³´ ê°±ì‹  ê°€ëŠ¥ 

![ê´€ë¦¬ì](README.assets/ê´€ë¦¬ì.gif)



## ê°œë°œí™˜ê²½

### ê°œë°œë„êµ¬

- Python
- Django
- HTML/CSS
- JavaScript
- Vue.js

### ëª©í‘œ ì„¤ì •

- ì„¤ì •í•œ ì»¤ë°‹ ì–‘ì‹ì— ë§ì¶° ê¹ƒ ì»¤ë°‹í•˜ê¸°
  - FEAT : ìƒˆë¡œìš´ ê¸°ëŠ¥ì˜ ì¶”ê°€
  - FIX: ë²„ê·¸ ìˆ˜ì •
  - DOCS: ë¬¸ì„œ ìˆ˜ì •
  - STYLE: ìŠ¤íƒ€ì¼ ê´€ë ¨ ê¸°ëŠ¥(ì½”ë“œ í¬ë§·íŒ…, ì„¸ë¯¸ì½œë¡  ëˆ„ë½, ì½”ë“œ ìì²´ì˜ ë³€ê²½ì´ ì—†ëŠ” ê²½ìš°)
  - REFACTOR: ì½”ë“œ ë¦¬í™í† ë§
  - TEST: í…ŒìŠ¤íŠ¸ ì½”íŠ¸, ë¦¬í™í† ë§ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€
  - CHORE: ë¹Œë“œ ì—…ë¬´ ìˆ˜ì •, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ìˆ˜ì •(ex .gitignore ìˆ˜ì • ê°™ì€ ê²½ìš°)
- ìœ ì € ì¹œí™”ì ì¸ ì‚¬ì´íŠ¸ ë§Œë“¤ê¸°
- ë§¤ì¼ ì•„ì¹¨ ìŠ¤í¬ëŸ¼ íšŒì˜ ë° Todo list ë§Œë“¤ê¸°



### í”„ë¡œí† íƒ€ì…([FIGMA](https://www.figma.com/file/LKcLYFxgbjVYxKX8o2Amkq/EIVOM?node-id=15%3A33))

![prototype](README.assets/prototype.PNG)

### ERD

![ERD](README.assets/ERD.PNG)

- ì£¼ ëª¨ë¸ : ì˜í™”, ìœ ì €, ë¦¬ë·°, ëŒ“ê¸€, ì¥ë¥´, í¬ë£¨
  - 1:N ì°¸ì¡° ê´€ê³„ 
    - ì˜í™”-ë¦¬ë·°, ìœ ì €-ë¦¬ë·°, ìœ ì €-ê²Œì‹œê¸€, ê²Œì‹œê¸€-ëŒ“ê¸€ 
  - M:N ì°¸ì¡° ê´€ê³„
    - ì˜í™”-ìœ ì €, ì˜í™”-ì¥ë¥´, í¬ë£¨-ì˜í™”



### TMDB ì—ì„œ API ë°ì´í„° ìš”ì²­ í›„ jsonìœ¼ë¡œ ì €ì¥í•˜ê¸°  

1. ì¥ë¥´ ë°›ì•„ì˜¤ê¸°
2. ì¸ê¸°ì˜í™” ë°ì´í„° ë°›ì•„ì˜¤ê¸°
   1. ë°ì´í„° ë³„ë¡œ ë””í…Œì¼ ì •ë³´ ë°›ì•„ì˜¤ê¸°
   2. ì˜í™” IDë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìºìŠ¤íŠ¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸° 
   3. ë°°ìš°ëŠ” ì˜ì–´ ì´ë¦„ ëŒ€ì‹  as_known_as Nameìœ¼ë¡œ ì´ë¦„ ì…ë ¥í•˜ê¸°
3. JSONìœ¼ë¡œ ì €ì¥ 

```python
import json
import requests

def get_genre_datas() :
    BASE_URL = "https://api.themoviedb.org/3/genre/movie/list"
    total_genre = []

    request_url = f"{BASE_URL}?api_key={TMDB_API_KEY}&language=ko-KR"
    genres = requests.get(request_url).json()
    print(genres)
    print('-----------------------------')
    for genre in genres['genres'] :
        print(genre)
        fields = {
            'id' : genre['id'],
            'name' : genre['name']
        }
        print(fields)
        print('----------------------------------')
        data = {
            "pk" : genre['id'],
            "model" : "movies.Genre",
            "fields" : fields
        }
        print(data)
        print('------------------------------')
        total_genre.append(data)
        print(total_genre)
        print('------------------------------------------')
    with open("genre_data.json","w",encoding="utf-8") as w:
        json.dump(total_genre,w,indent="\t", ensure_ascii=False)

# get_genre_datas()
def get_movie_datas() :
    total_data_id = []
    total_movie_data = []
    BASE_URL = "https://api.themoviedb.org/3/movie/"
    BASE_URL2 = "https://api.themoviedb.org/3/person/"

    #1í˜ì´ì§€ë¶€í„° 738í˜ì´ì§€ê¹Œì§€ popular movie ê°€ì ¸ì™€ì„œ idë§Œ ì·¨í•˜ê¸° 
    #501í˜ì´ì§€ë¶€í„°ëŠ” ì—ëŸ¬ê°€ ë°œìƒí•´ 500ê¹Œì§€ë¡œ ìˆ˜ì • 
    # cnt = 0
    # for i in range(1,501) :
    #     cnt += 1 
    #     print(f'page_id:{cnt}')
    #     #popular ìš”ì²­ 
    #     request_url = f"{BASE_URL}popular?api_key={TMDB_API_KEY}&language=ko-KR&page={i}&region=KR"
    #     #moviesì— ì €ì¥ 
    #     movies = requests.get(request_url).json()
    #     # print(movies)

    #     #resultë¥¼ ëŒë©´ì„œ idë§Œ ì €ì¥ 
    #     for movie in movies['results'] :
    #         total_data_id.append(movie['id'])
    cnt = 0
    #total_data_id = [44632]
    #idë“¤ì„ ëŒë©´ì„œdetail ì •ë³´ ê°€ì ¸ì˜¤ê¸° 
    for movie_id in total_data_id :
        cnt += 1 
        print(f'movie_detail:{cnt}')
        # detail ì •ë³´ ìš”ì²­í•  url 
        request_url = f"{BASE_URL}{movie_id}?api_key={TMDB_API_KEY}&language=ko-KR"
        print(request_url)
        #jsonìœ¼ë¡œ ê°€ì ¸ì™€ì„œ 
        movie = requests.get(request_url).json()
        print(movie)
            #genre_idí˜•íƒœê°€ jsonì´ë¼ ëª¨ë¸ê³¼ í˜•ì‹ì´ ë§ì§€ ì•Šì•„,idë§Œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ í•„ë“œ ë”°ë¡œ ìƒì„±
        genre_ids = [] 
        
        for genre in movie['genres'] :
            genre_ids.append(genre['id'])
        print(genre_ids)
        fields = {
        'id' : movie['id'],
        'title' : movie['title'],
        'original_title' : movie['original_title'],
        'poster_path' : movie['poster_path'],
        'backdrop_path' : movie['backdrop_path'],
        'overview' : movie['overview'],
        'release_date' : movie['release_date'],
        'vote_count' : movie['vote_count'],
        'vote_average' : movie['vote_average'],
        'popularity' : movie['popularity'],
        'runtime' : movie['runtime'],
        'tagline' : movie['tagline'],
        'genres' :genre_ids,
        'director': '',
        'actor_id' : [],
        'actors': [],
        'actors_path' : [],

    }

        data = {
            "pk" : movie['id'],
            "model" : "movies.Movie",
            "fields" : fields
        }
        total_movie_data.append(data)
    # ì˜í™” idë¥¼ ê°€ì ¸ì™€ì„œ 
    for data in total_movie_data :
        movie_id = data['fields']['id']
        #í¬ë ˆë”§ì„ ê²€ìƒ‰í•œë‹¤.
        credit_request_url = f"{BASE_URL}{movie_id}/credits?api_key={TMDB_API_KEY}&language=ko-KR"
        #í¬ë ˆë”§ infoë¥¼ ë¶ˆëŸ¬ì˜¤ê³  
        credit_info = requests.get(credit_request_url).json()
        #ë°°ìš°ë¥¼ ìµœëŒ€ 15ëª…ê¹Œì§€ë¡œ ë„£ê¸°ë¡œí•˜ê³ , í•´ë‹¹ ë°°ìš° ëª©ë¡ë“¤ì„ ëŒë©´ì„œ,
        for cast in credit_info['cast'][:15] :
            #idë¥¼ ê°€ì ¸ì™€ì„œ 
            cast_id = cast['id']
            print(cast_id)
            # ë°°ìš°ì˜ idë¡œ ë””í…Œì¼ ì •ë³´ì— ì ‘ê·¼í•œë‹¤.
            name_request_url = f"{BASE_URL2}{cast_id}?api_key={TMDB_API_KEY}&language=ko-KR"
            actor = requests.get(name_request_url).json()
            # ë°°ìš° idë¥¼ ëª¨ë¸ì— ì¶”ê°€ 
            data['fields']['actor_id'].append(cast_id)
            #ë°°ìš°ì— ì˜ ì•Œë ¤ì§„ ì´ë¦„ì„ ëª¨ë¸ì— ì¶”ê°€ 
            if actor['also_known_as'] :
                data['fields']['actors'].append(actor['also_known_as'][0])
            else :
                data['fields']['actors'].append(cast['name'])
            #ë°°ìš°ì˜ í”„ë¡œí•„ì‚¬ì§„ì„ ëª¨ë¸ì— ì¶”ê°€ 
            if actor['profile_path'] :
                data['fields']['actors_path'].append(actor['profile_path'])
            else :
                data['fields']['actors_path'].append('')
        #ê°ë…ì´ë¦„ì„ ëª¨ë¸ì— ì¶”ê°€ 
        if credit_info['crew']:
            data['director'] = credit_info['crew'][0]['name']
    
    with open("movie_data.json", "w", encoding="utf-8") as w:
        json.dump(total_movie_data, w, indent="\t", ensure_ascii=False)
        
get_genre_datas()
get_movie_datas()
```



## ì„œë²„ URL ëª…ì„¸

### [URL](https://github.com/holawan/EIVOM/blob/master/final-pjt-back/URL.md)
